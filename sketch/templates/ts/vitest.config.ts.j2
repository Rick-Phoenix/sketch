{% import "utils.j2" as utils %}
import { defineConfig } from "vitest/config";
import { resolve, join } from "node:path";

const j = join;
const r = resolve;

const dir = import.meta.dirname;
const setupDir = r(dir, "{{ setup_dir }}");

export default defineConfig({
  plugins: [],
  resolve: {
    alias: {
      '@': r(dir, "{{ src_rel_path }}"),
    },
  },

  test: { 
    setupFiles: [ 
      j(setupDir, "tests_setup.ts"),  
      {% for file in setup_files +%}
      j(setupDir, "{{ file }}") {% call utils::optional_comma(!loop.last) %}
      {% endfor +%}
    ], 
    globals: {{+ globals }},
    environment: "{{ environment }}",
    silent: {{+ silent }},
    sequence: {
      setupFiles: "list",
    },
  },
});
